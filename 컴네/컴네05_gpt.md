좋아요 👍
지금 네가 올린 `05_DHCPCDN..pdf`는 **DHCP, CDN, Socket API** 3가지를 다루는 내용이야.
아래는 이 PDF의 전체 내용을 *빠짐없이 풀어서* 쉽게 이해될 수 있도록 설명한 버전이야.
(마치 수업 듣듯이 천천히 따라갈 수 있게 해설했어.)

---

## 🌐 1. DHCP (Dynamic Host Configuration Protocol)

### (1) 개념

DHCP는 **IP 주소를 자동으로 배정해주는 프로토콜**이야.
즉, PC나 스마트폰이 네트워크에 처음 연결될 때,
자동으로 IP 주소, 서브넷 마스크, 게이트웨이, DNS 서버 등을 받아와서 인터넷을 쓸 수 있게 해준다.

> 👉 IP를 자동으로 배정받는 이유:
> 수동으로 설정하면 매번 주소 충돌 위험이 있고, 관리가 너무 힘들기 때문이야.

---

### (2) DHCP의 동작 절차 — DORA

DHCP는 **DORA**라고 불리는 4단계 절차로 작동해.

| 단계 | 이름          | 설명                                     |
| -- | ----------- | -------------------------------------- |
| D  | Discover    | 클라이언트가 “여기 DHCP 서버 있나요?” 하고 브로드캐스트로 찾음 |
| O  | Offer       | DHCP 서버가 “이 IP 써도 돼요!” 하며 IP 제안        |
| R  | Request     | 클라이언트가 “이 IP로 할게요”라고 특정 서버에 요청         |
| A  | Acknowledge | 서버가 “좋아요, 승인!” 하며 임대 확정                |

* 서버 포트: UDP 67
* 클라이언트 포트: UDP 68

> 💡 DHCP는 **UDP 기반**으로 동작한다.
> 연결이 필요 없는 “빠른 단문 메시지 통신”이라 UDP를 사용함.

---

### (3) IP 임대(Lease) 개념

DHCP는 영구적인 IP를 주지 않아.
**‘임대(Lease)’ 형태로 일정 시간 동안만 사용권을 주고**, 그 시간이 지나면 갱신해야 해.

| 항목             | 설명                                 |
| -------------- | ---------------------------------- |
| 동적할당 (Dynamic) | 서버가 가용 IP 풀(pool)에서 임시로 IP를 임대     |
| 고정할당 (Static)  | 특정 MAC 주소와 IP를 고정 매핑 (항상 같은 IP 사용) |
| 임대기간 (Lease)   | 일정 시간 후 만료되며, 주기적으로 갱신 필요          |

---

### (4) T1, T2 타이머

IP 임대에는 세 가지 중요한 시점이 있어.

| 타이머        | 의미                                      | 일반 비율        |
| ---------- | --------------------------------------- | ------------ |
| T1         | **갱신(Renew)** 시점 — 같은 서버에 갱신 요청         | 임대의 50%      |
| T2         | **재연결(Rebind)** 시점 — 다른 서버에게 브로드캐스트로 요청 | 임대의 87.5%    |
| 만료(Expire) | 여전히 응답 없으면 IP 사용 중지 후 재탐색               | 100% (만료 시점) |

> 💬 즉,
> ① IP 임대한 후 T1 도달 시 원래 서버에게 갱신 요청을 보내고,
> ② 서버가 응답이 없으면 T2 시점에 다른 서버들에게 요청을 보내,
> ③ 그래도 없으면 IP를 반납하고 다시 Discover 단계로 돌아간다.

---

### (5) DHCP 상태 전이 과정

| 상태         | 설명                              |
| ---------- | ------------------------------- |
| INIT       | 네트워크 초기화. DHCPDISCOVER 송신.      |
| SELECTING  | 여러 서버의 OFFER를 받고 비교 후 선택.       |
| REQUESTING | DHCPREQUEST 전송 후 서버의 ACK 대기.    |
| BOUND      | 정상적으로 IP 사용 중. T1/T2 타이머 동작 시작. |
| RENEWING   | T1 시점에 원 서버에게 DHCPREQUEST 전송.   |
| REBINDING  | T2 시점까지 응답이 없으면 모든 서버에 요청.      |
| EXPIRE     | 만료 시 IP 반납 후 INIT으로 복귀.         |

---

### (6) DHCP로 얻는 정보

* IP 주소
* 서브넷 마스크
* 기본 게이트웨이
* DNS 서버 주소

> 결국 이 정보들이 설정되어야만 인터넷 통신이 가능해진다.

---

## 📺 2. 비디오 스트리밍과 CDN (Content Delivery Network)

### (1) 비디오 스트리밍의 특징

* 유튜브, 넷플릭스, 프라임비디오 등 대부분의 트래픽이 비디오 스트리밍.
* 여러 사람이 동시에 같은 영상을 보기 때문에 **대규모 트래픽** 발생.
* 네트워크 상태가 일정하지 않아 (무선/유선/혼잡 등) **화질이 계속 변할 수 있음**.

---

### (2) 스트리밍에서 생기는 문제

| 문제          | 설명                        |
| ----------- | ------------------------- |
| 대역폭 변동      | 시간대나 네트워크 상태에 따라 전송속도가 바뀜 |
| 패킷 손실       | 영상 끊김, 프레임 드롭 발생          |
| 지연 (Delay)  | 패킷 도착이 늦어 “버퍼링중…” 현상 발생   |
| 지터 (Jitter) | 도착 시점이 불규칙 → 재생이 매끄럽지 않음  |

→ 해결책: **클라이언트 측 버퍼(buffer)** 를 둬서 미리 데이터를 쌓아두고 일정하게 재생.

---

### (3) 지속적 재생 제약 (Continuous Playout Constraint)

비디오는 원래 녹화된 속도(예: 30fps) 그대로 재생되어야 함.
네트워크가 느려지면 버퍼가 비어 “멈춤”이 생기기 때문에 **버퍼링**으로 지연을 흡수한다.

---

### (4) DASH (Dynamic Adaptive Streaming over HTTP)

HTTP 위에서 동작하는 **적응형 비디오 스트리밍 기술**.

#### 동작 방식

1. 서버는 비디오를 **몇 초 단위의 청크(chunk)** 로 쪼갠다.
2. 각 청크를 여러 화질(비트레이트)로 인코딩해둔다.
3. 클라이언트는 `manifest(MPD)` 파일을 보고

   * 현재 네트워크 속도를 측정한 뒤
   * “지금 속도면 720p를 재생할 수 있겠다” 하고
   * 해당 청크만 HTTP로 요청한다.
4. 네트워크가 나빠지면 자동으로 480p 청크로 전환.

> ✅ DASH는 네트워크 품질에 따라 “자동으로 화질을 조정”하는 기술이다.

---

### (5) CDN (Content Delivery Network)

CDN은 **콘텐츠를 전 세계에 분산 저장하는 네트워크 시스템**이야.
사용자와 가까운 서버에서 데이터를 전송해서 지연을 줄인다.

#### 구조

* **DNS가 사용자 위치 기반으로 가까운 CDN 노드를 매핑.**
* 캐시에 영상이 있으면 바로 응답.
* 없으면 상위 데이터센터에서 가져와 캐시에 저장.

#### 장점

* 전송 지연↓
* 서버 부하↓
* QoE(사용자 경험)↑

---

### (6) 주요 CDN 사례

| 서비스          | CDN 이름                    | 운영주체        | 특징             |
| ------------ | ------------------------- | ----------- | -------------- |
| YouTube      | GGC (Google Global Cache) | Google      | ISP 내부 캐시 서버   |
| Netflix      | Open Connect              | Netflix     | ISP에게 장비 무상 배포 |
| Amazon Prime | CloudFront                | AWS         | 전세계 400개 엣지 서버 |
| Wavve        | 국내 ISP CDN                | SKB/KT/LGU+ | 국내 최적화         |
| TVING        | 자체 + LGU+ CDN             | CJ ENM      | 실시간 방송 지원      |
| Coupang Play | AWS CloudFront            | 쿠팡/AWS      | 글로벌 확장성        |

> 🎯 CDN의 핵심은 “지리적 분산 + DNS 기반 서버 선택”이야.

---

### (7) Wireshark 실습 예시

* `nslookup www.youtube.com` → DNS가 지역별 다른 CDN IP를 반환.
* `traceroute` → 홉 수를 줄여 지연을 감소시킴.
* YouTube 재생 시 실제 데이터는 `googlevideo.com`에서 내려옴 (CDN 서버).

---

## ⚙️ 3. DHCP → DNS → CDN → 소켓의 연계

전체 인터넷 연결 흐름은 다음과 같아.

1. **DHCP**가 네트워크 설정(IP, 게이트웨이, DNS)을 자동으로 준다.
2. **DNS**가 도메인 이름을 IP 주소로 변환한다.
3. **CDN**이 DNS 결과를 기반으로 가장 가까운 서버를 매핑한다.
4. **Socket API**를 통해 실제 TCP/UDP 연결이 이루어진다.

즉, DHCP가 **인터넷 연결의 시작점**이고,
CDN은 **콘텐츠 전송의 끝단 품질**을 담당한다.

---

## 🔍 요약 핵심 흐름

```
[DHCP] → IP/DNS 설정
   ↓
[DNS] → 도메인 이름 해석
   ↓
[CDN] → 가까운 서버 선택
   ↓
[Socket] → TCP/UDP 통신
   ↓
[Application] → HTTP / 스트리밍 / 메일 / 게임 ...
```

---

## 💡 기억 포인트 정리

| 개념     | 핵심 키워드                                                     |
| ------ | ---------------------------------------------------------- |
| DHCP   | DORA (Discover–Offer–Request–Ack), UDP 67/68, Lease, T1/T2 |
| DNS    | 이름 → IP 매핑, 계층적 네임서버 구조                                    |
| CDN    | 지리적 분산, 캐시, QoE 향상                                         |
| DASH   | 네트워크 품질에 따른 동적 화질 조정                                       |
| Socket | IP+Port 조합, TCP=연결형, UDP=비연결형                              |

---

원한다면, 이 내용을 기반으로 **이론문제 30문항 세트 (객관식+주관식 혼합)** 도 만들어줄 수 있어.
그걸 풀면 DHCP, CDN, Socket 개념 완벽히 정리될 거야.
그걸 바로 만들어줄까?
