# 📡 컴퓨터네트워크: 12주차 물리 계층 (Physical Layer)



이번 12주차 강의는 OSI 7계층 중 가장 아래에 있는 **물리 계층**을 다룹니다.

**학습 목표:**
* 데이터와 신호(Analog vs Digital)의 차이 이해 
* 데이터를 신호로 바꾸는 **인코딩/변조(Modulation)** 기술 (ASK, FSK, PSK, QAM) 
* 통신의 속도 한계를 결정하는 **나이퀴스트(Nyquist)와 섀넌(Shannon)의 정리** 
* 전송 매체(케이블)와 다중화(Multiplexing) 기술 

---

## 1. 🔌 물리 계층의 역할

상위 계층(데이터 링크 계층)에서 내려온 프레임(비트열, 0과 1)을 **실제 전송 매체(구리선, 광섬유, 공기)를 통해 보낼 수 있는 신호(전기, 빛, 전파)로 변환**하여 전달하는 역할입니다. 

* **주요 다루는 것들:** 전압 수준, 케이블 종류(UTP, Fiber), 주파수, 비트 전송률(bps), 변조 방식 등 하드웨어적인 특성을 정의합니다. 

---

## 2. 🌊 데이터와 신호 (Data & Signals)

데이터를 전송하려면 '신호'로 바꿔야 합니다. 

### 아날로그 vs 디지털 신호

| 구분 | 아날로그 (Analog) | 디지털 (Digital) |
| :--- | :--- | :--- |
| **형태** | 곡선 형태의 **연속적인** 변화 | 0과 1의 **이산적인(Discrete)** 변화 (ON/OFF) |
| **예시** | 사람의 목소리, 라디오 전파 | 컴퓨터 데이터 |
| **특징** | 잡음(Noise)에 민감함 | 오류가 적고 압축이 쉬움 |

### 아날로그 → 디지털 변환 (PCM)

아날로그 신호(목소리 등)를 디지털로 바꾸는 과정을 **PCM (Pulse Code Modulation)**이라고 합니다. 

1.  **표본화 (Sampling)**: 시간축을 잘게 쪼개어 일정 간격으로 값을 추출합니다. (연속 시간 → 이산 시간) 
2.  **양자화 (Quantization)**: 추출한 값을 정해진 단계(Level)로 반올림하여 근사합니다. (연속 값 → 이산 값) 
3.  **부호화 (Coding)**: 각 값을 0과 1의 비트열로 바꿉니다. 

---

## 3. ⚡️ 디지털 전송과 변조 (Modulation)

컴퓨터의 0과 1을 전선이나 공기 중으로 보내기 위해 전기 신호로 바꾸는 방법입니다. 

### 1) 라인 코딩 (Line Coding) - 유선 전송용 

* **NRZ (Non-Return to Zero)**: 0은 낮은 전압, 1은 높은 전압. 구조가 단순하지만, 0이나 1이 연속되면 동기화가 깨질 수 있습니다. 
* **Manchester Encoding**: 비트 중간에 항상 전압 변화(High→Low 또는 Low→High)를 줍니다. **이더넷(10BASE-T)**에서 사용하며, 신호 변화가 항상 있어 동기화가 쉽습니다. 
* **블록 인코딩 (4B/5B)**: 4비트를 5비트 패턴으로 바꿔 전송 효율과 동기화를 동시에 잡는 방식입니다. (100Mbps 이더넷 사용) 

### 2) 아날로그 변조 (Modulation) - 무선/고속 전송용 

0과 1을 전파(Carrier Wave)의 특성을 변화시켜 실어 보내는 기술입니다.

* **ASK (진폭 변조)**: 전파의 **높이(진폭)**를 다르게 함 (0은 낮게, 1은 높게). 잡음에 매우 취약해서 현대에는 잘 안 씁니다. 
* **FSK (주파수 변조)**: 전파의 **주파수(빠르기)**를 다르게 함. 잡음에 강해 저속 통신(RFID 등)에 쓰입니다. 
* **PSK (위상 변조)**: 전파의 **위상(출발점)**을 다르게 함. 현대 통신(Wi-Fi, LTE)의 기본이 되는 방식입니다. 

### 🚀 핵심 기술: QAM (Quadrature Amplitude Modulation) 

**"진폭(ASK) + 위상(PSK)"을 동시에 변화**시켜 데이터를 구겨 넣는 기술입니다. 
* **원리**: 한 번의 신호 변화(심벌)에 여러 비트를 담습니다. 
    * **16-QAM**: 4비트/심벌 
    * **64-QAM**: 6비트/심벌 
    * **256-QAM**: 8비트/심벌 (LTE, 5G, Wi-Fi 6에서 사용) 
* **특징**: 동일한 주파수 대역폭에서 전송 속도를 획기적으로 높일 수 있습니다. 단, 잡음이 심하면 오류가 나기 쉬워 고차(High) QAM을 쓰지 못합니다. 

---

## 4. 📏 속도의 한계: 나이퀴스트와 섀넌

"이 케이블로 최대 얼마나 빨리 보낼 수 있을까?"를 계산하는 공식입니다. 

### 1) 대역폭 (Bandwidth) 
신호가 사용할 수 있는 주파수의 범위입니다. 대역폭이 넓을수록(도로가 넓을수록) 더 많은 데이터를 보낼 수 있습니다. 

### 2) 나이퀴스트 (Nyquist) 정리 - 이상적인 환경 
**잡음이 없는** 완벽한 채널에서의 최대 전송률입니다. 
$$R = 2 \times B \times \log_2(M)$$
* $R$: 최대 전송률 (bps) 
* $B$: 대역폭 (Hz) 
* $M$: 신호 레벨의 수 (예: 2진 신호면 2, 4레벨이면 4) 

> **예제**: 대역폭 3000Hz, 4레벨 신호($M=4$)일 때?
> $R = 2 \times 3000 \times \log_2(4) = 6000 \times 2 = 12,000 \text{ bps}$ 

### 3) 섀넌 (Shannon) 용량 - 현실적인 환경 
**잡음이 있는(Noise)** 현실 채널에서의 한계 속도입니다. 아무리 신호 레벨($M$)을 높여도 잡음이 심하면 속도를 올릴 수 없다는 이론입니다. 
$$C = B \times \log_2(1 + S/N)$$
* $C$: 채널 용량 (bps) 
* $S/N$: 신호 대 잡음비 (SNR, Signal-to-Noise Ratio) 

> **참고**: SNR은 보통 데시벨(dB)로 주어지므로, 이를 선형 비율(Linear)로 바꿔서 공식에 넣어야 합니다. ($SNR_{dB} = 10 \log_{10}(S/N)$) 
> * 예: 30dB → 1000배, 20dB → 100배

---

## 5. 🖧 전송 매체와 스위칭

### 전송 매체 (Transmission Media) 

* **유선**:
    * **Twisted Pair (UTP)**: LAN선. 저렴하고 많이 씁니다. 
    * **Coaxial (동축)**: TV 케이블. 잡음에 강합니다. 
    * **Fiber Optic (광케이블)**: 빛 사용. 초고속, 장거리 전송 가능. 
* **무선**: 
    * **라디오 파형**: Wi-Fi, Bluetooth. 회절이 잘 되어 장애물을 잘 넘습니다. 
    * **마이크로웨이브**: 직진성이 강함. 위성 통신 등에 사용. 

### 스위칭 기술 (Switching) 

* **회선 교환 (Circuit Switching)**: 전화망 방식. 통신하는 동안 회선을 **독점**합니다. 안정적이지만 낭비가 심합니다. 
* **패킷 교환 (Packet Switching)**: 인터넷 방식. 데이터를 패킷으로 쪼개어 회선을 **공유**합니다. 효율적이고 빠릅니다. 

---

## 6. 🔀 다중화 (Multiplexing)

하나의 통신 선로에 여러 신호를 동시에 실어 보내는 기술입니다. 

* **TDM (Time Division)**: **시간**을 쪼개서 번갈아 가며 전송. 
* **FDM (Frequency Division)**: **주파수**를 나누어(라디오 채널처럼) 동시에 전송. 
* **WDM (Wavelength Division)**: 광통신에서 빛의 **파장(색깔)**을 나누어 전송. Tbps급 속도 가능. 
* **CDM (Code Division)**: 고유한 **코드**를 곱해서 신호를 섞어 보냄 (3G 이동통신). 
* **SDM (Spatial Division - MIMO)**: **공간** 다중화. 여러 개의 안테나로 데이터를 동시에 쏴서 속도를 높임 (Wi-Fi, 5G 핵심 기술). 

---

## 7. 🔌 이더넷 물리 계층과 케이블

### 이더넷 표준 

* **10BASE-T**: 10Mbps (UTP 케이블) 
* **100BASE-TX**: 100Mbps (UTP) 
* **1000BASE-T**: 1Gbps (UTP) 

### UTP 케이블 연결 방식 

* **다이렉트 케이블 (Direct, T568B)**: **서로 다른 장비** 연결 시 (PC ↔ 스위치/허브). 양쪽 끝 배열이 같음. 
* **크로스 케이블 (Cross, T568A)**: **같은 장비** 연결 시 (PC ↔ PC, 스위치 ↔ 스위치). 송신/수신 핀이 꼬여 있음. 
    * *(참고: 요즘 장비는 Auto-MDIX 기능으로 케이블 종류를 자동 인식하므로 다이렉트 케이블만 써도 대부분 됩니다.)*

---

## 8. 🧪 실습 및 과제

강의에는 Python을 이용한 신호 처리 실습이 포함되어 있습니다. 

1.  **변조 파형 생성**: ASK, FSK, BPSK 코드를 실행하여 0과 1이 어떻게 다른 파형으로 변하는지 시각적으로 확인합니다. 
2.  **QAM과 노이즈(SNR) 실험**:
    * 노이즈가 심해질수록(SNR이 낮을수록) QAM 점들이 흩어져서 데이터를 읽기 어려워짐을 확인합니다. 
    * **적응형 변조(Adaptive Modulation)**: SNR이 좋을 때는 256-QAM(고속), 나쁠 때는 QPSK(저속/안정)로 자동 전환하는 로직을 구현해 봅니다. (실제 LTE/5G가 이렇게 동작함) 
3.  **계산 문제**: 주어진 대역폭과 SNR로 나이퀴스트/섀넌 한계 속도를 계산하는 연습입니다.
